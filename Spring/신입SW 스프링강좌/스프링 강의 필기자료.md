```java
<bean id = "calculator" class = "com.javalec.ex.Calculator" />
```



![image-20200605170157883](images/image-20200605170157883.png)

보는 것과 같이 이름을 동일하게 맞춰주어야한다. 

`ref ` : 어떤 파일을 참조하는지







# 11강  스프링 MVC 기초 



### 11-1 . 스프링 MVC 개요 

- Model : 데이터를 처리하는 부분 
- View : 화면을 담당하는 부분 
- Controller : 요청을 처리하는 부분 ( 뷰와 모델 사이의 통신 역할 )

<img src="images/image-20200616105642617.png" alt="image-20200616105642617" style="zoom:67%;" />



### 11-2 . 스프링 MVC 구조 살펴보기 

- DispatcherServlet 
  - 클라이언트의 요청을 최초로 받아, 컨트롤러에게 전달 
- web.xml 
  - DispatcherServlet 서브릿 맵핑 
  - 스프링 설정 파일 위치 정의 
- servlet-context.xml 
  - 스프링 컨테이너 설정 파일 
- 컨트롤러
  - Dispatcher에서 전달된 요청을 처리 



```xml
<!-- 한글 파일 깨지지 않도록 설정 -->
<!-- web.xml -->
<filter>
    <filter-name>encodingFilter</filter-name>
    <filter-class>
        org.springframework.web.filter.CharacterEncodingFilter     
    </filter-class>
    <init-param>
        <param-name>encoding</param-name>   
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>  
        <param-value>true</param-value>
    </init-param>
</filter>    

<filter-mapping>
    <filter-name>encodingFilter</filter-name>
    <url-pattern>/*</url-pattern>                 
</filter-mapping> 
```

![image-20200616111303460](images/image-20200616111303460.png)





- 이미지 파일은 `resources` 디렉터리 밑에 있어야 한다. 그 이유는 `servlet-context.xml` 파일 내에서 resource 의 경로에 대해서 매핑을 했기 때문. 

  ```xml
  <!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
  <resources mapping="/resources/**" location="/resources/" />
  ```

![image-20200616111543739](images/image-20200616111543739.png)







# 12강 컨트롤러 



### **12-1 . 컨트롤러 클래스 제작 순서** 

1. `@Controller` 를 이용하여 클래스 생성 

   ```java
   @Controller
   public class HomeController{
   			....
   }
   ```

2. `@RequestMapping` 을 이용한 요청 경로 지정 

   ```java
   @RequestMapping("/board/view")	// 요청 경로 ( path )
   public String View(){
       return "board/view"; 		// 뷰 페이지 이름 
   }
   ```

3. 요청 처리 메소드 구현 

4. 뷰 이름 리턴 



### **12-2 . 뷰 페이지 이름 생성 방법** 

뷰 페이지 이름 = prefix + 요청 처리 메소드 반환값 + suffix  (`servlet-context.xml` 파일에 명시 )

![image-20200616112439653](images/image-20200616112439653.png)



### 12-3. 뷰에 데이터 전달 

- 컨트롤러에서 로직 수행 후 뷰페이지를 반환한다. 이 때 뷰에서 사용하게 될 데이터를 객체로 전달할 수 있다. 

  #### Model 클래스를 이용한 데이터 전달 

  ```java
  @RequestMapping("/board/content")
  public String content(Model model){		// 모델 객체를 파라미터로 받음 
      model.addAttribute("id",30); 		// 모델 객체에 데이터를 담음 
      return "board/content"; 	
  }
  ```

  ```jsp
  <body>
      content.jsp 입니다. <br />
      id : ${id}				<!-- 컨트롤러에서 전달받은 모델 객체의 속성을 이용 -->
  </body>
  ```

  

  #### ModelAndView 클래스를 이용한 데이터 전달 

  ```java
  @RequestMapping("/board/reply")
  public ModelAndView reply(){
      ModelAndView mv = new modelAndView(); 		// ModelAndView 객체 생성 
      mv.addObject("id", 30); 					// Model 객체에 데이터를 담음 
      mv.setViewname("board/reply"); 				// 뷰 이름 설정 
      return mv; 
  }
  ```



### 12-4. 클래스에 @RequestMapping 적용 



- ```java
  @Controller
  @RequestMapping("/board")			// 클래스에 @RequestMapping 적용 
  public class HomeController{
      
      @RequestMapping("/write")		// 메서드에 @RequestMapping 적용
      public String write(Model model){
          model.addAttribute("id", 30); 
          return "/board/write"; 
      }
  }
  ```

  위의 RequestMapping 에 해당하는 경로는 두개의 경로를 더해야한다. -> `/board/write` 





# 13강 Form 데이터 



### 13-1 . HttpServletRequest 클래스 

```java
@RequestMapping("board/confirmId")
public String confirmId(HttpServletRequest httpServletRequest, Model model){
    String id = httpServletRequest.getParameter("id"); 
    String pw = httpServletRequest.getParameter("pw"); 
    model.addAttribute("id", id); 
    model.addAttribute("pw", pw); 
    return "board/confirmId"; 
}
```

- `httpServletRequest` : 사용자가 요청한 데이터를 담는 객체 
- `model` : 뷰에 넘길 데이터를 저장하는 객체 



### 13-2 . @RequestParam 어노테이션 

```java
@RequestMapping("board/checkId")
public String checkId(@RequestParam("id") String id, @RequestParam("pw") String pw, Model model){
    model.addAttribute("identify",id); 
    model.addAttribute("password",pw); 
    return "board/checkId"; 
}
```

- `@RequestParam` 어노테이션은 넘길 때 값을 반드시 넘겨야한다. 만약 값을 넘기지 않을 경우 400 Error 발생 



### 13-3 데이터(커맨트) 객체 

```java
@RequestMapping("/member/join")
public String joinData(Member member){
    return "member/join"; 
}
```

![image-20200616115120284](images/image-20200616115120284.png)





### 13-4 . @PathVariable 

- @PathVariable  어노테이션을 이용하면 경로에 변수를 넣어 요청 메소드에서 파라미터로 이용할 수 있습니다. 

![image-20200616122813006](images/image-20200616122813006.png)





# 16-20강 스프링 MVC 게시판 만들기 

### DataBase 구축 

```mssql
create table mvc_sboard(
	bId int primary key, 
	bName varchar(40), 
	bTitle varchar(200), 
	bContent varchar(200), 
	bDate datetime default sysdatetime(), 
	bHit int default 0 , 
	bGroup int, 
	bStep int, 
	bIndent int 
); 
```



### 시퀀스 생성 

![image-20200616135449476](images/image-20200616135449476.png)

### BDto

```java
package com.javalec.spring_pjt_board.dto;

import java.sql.Timestamp;

public class BDto {
	
	int bId; 
	String bName; 
	String bTitle; 
	String bContent; 
	Timestamp bDate ; 
	int bHit; 
	int bGroup; 
	int bStep; 
	int bIndent; 
	
	public BDto() {
		// TODO Auto-generated constructor stub
	}
	
	public BDto(int bId, String bName, String bTitle, String bContent,  Timestamp bDate, int bHit, int bGroup, int bStep, int bIndent) {
		this.bId = bId; 
		this.bName = bName; 
		this.bTitle = bTitle; 
		this.bContent = bContent; 
		this.bDate = bDate; 
		this.bHit = bHit; 
		this.bGroup = bGroup; 
		this.bStep = bStep; 
		this.bIndent = bIndent; 	
	}

	public int getbId() {
		return bId;
	}

	public void setbId(int bId) {
		this.bId = bId;
	}

	public String getbContent() {
		return bContent;
	}

	public void setbContent(String bContent) {
		this.bContent = bContent;
	}

	public String getbName() {
		return bName;
	}

	public void setbName(String bName) {
		this.bName = bName;
	}

	public String getbTitle() {
		return bTitle;
	}

	public void setbTitle(String bTitle) {
		this.bTitle = bTitle;
	}

	public Timestamp getbDate() {
		return bDate;
	}

	public void setbDate(Timestamp bDate) {
		this.bDate = bDate;
	}

	public int getbHit() {
		return bHit;
	}

	public void setbHit(int bHit) {
		this.bHit = bHit;
	}

	public int getbGroup() {
		return bGroup;
	}

	public void setbGroup(int bGroup) {
		this.bGroup = bGroup;
	}

	public int getbStep() {
		return bStep;
	}

	public void setbStep(int bStep) {
		this.bStep = bStep;
	}

	public int getbIndent() {
		return bIndent;
	}

	public void setbIndent(int bIndent) {
		this.bIndent = bIndent;
	}	
}
```



### 커넥션 풀 사용 

- servers - context.xml 파일에 아래 코드 추가 

  ```xml
  	<Resource 
  		auth = "Container"
  		driverClassName = "com.microsoft.sqlserver.jdbc.SQLServerDriver"
  		url = "jdbc:sqlserver://localhost:9036;database=master;integratedSecurity=true"
  		name = "mssql-jdbc-6.4.0.jre7"
  		type = "javax.sql.DataSource"
  		maxActive = "50"
  		maxWait = "1000"
  	/>
  ```

   