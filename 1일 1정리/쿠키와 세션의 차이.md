## 쿠키 ( Cookie )

- 클라이언트 **로컬에 저장되는 키와 값**이 들어있는 작은 **데이터 파일**. 
- 이름, 값, 만료날짜(쿠키 저장기간), 경로 정보가 들어있다. 
- 일정 시간동안 데이터를 저장할 수 있다. ( 로그인 상태 유지에 활용 )



##### 적용 사례 

자동로그인, 팝업에서 "오늘 더 이상 이 창을 보지 않음" 체크, 쇼핑몰의 장바구니. 



##### 쿠키의 제한

- 클라이언트에 300개까지 쿠키 저장 가능.
- 하나의 도메인당 20개의 값만 가질 수 있음 
- 하나의 쿠키값은 4KB 까지 저장
- Response Header 에 Set-Cookie 속성을 사용하면 클라이언트에 쿠키를 만들 수 있다. 
- 사용자가 따로 요청하지 않아도, 브라우저가 request 시에 request Header 를 넣어서 자동으로 서버에 전송. 



##### 구성요소 

- **이름** : 각각의 쿠키를 구별하는데 사용되는 이름 

- **값** : 쿠키의 이름과 관련된 값

- **유효시간** : 쿠키의 유지시간 

- **도메인** : 쿠키를 전송할 도메인 

- **경로** : 쿠키를 전송할 요청 경로 



##### 쿠키의 동작 방식 

1. 클라이언트가 페이지를 요청 
2. 서버에서 쿠키를 생성 
3. HTTP 헤더에 쿠키를 포함시켜 응답 
4. 브라우저가 종료되어도 쿠키 만료 기간이 있다면 클라이언트에서 보관하고 있음 
5. 같은 요청을 할 경우 HTTP 헤더에 쿠키를 함께 전송 
6. 서버에서 쿠키를 읽어 이전 상태 정보를 변경할 경우에는 쿠키를 업데이트하여 변경된 쿠키를 HTTP 헤더에 포함시켜 응답. 







---



## 세션 ( Session )

- 일정 시간동안 같은 브라우저로부터 들어오는 일련의 요구를 하나의 상태로 보고 그 상태를 유지하는 기술, 즉 웹 브라우저를 통해 웹 서버에 접속한 이후로 브라우저를 종료할 때 까지 유지되는 상태. 
- 클라이언트가 Request 를 보내면, 해당 서버의 엔진이 클라이언트에게 유일한 ID 를 부여하는데 이것이 세션ID.

- 세션도 결국 쿠키를 사용한다. 



##### 세션 프로세스 

1. 클라이언트가 서버에 접속시 세션 ID 를 발급 받는다. 

2. 서버에서는 클라이언트로 발급해준 세션 ID 를 쿠키를 사용해 저장 .

3. 클라이언트는 다시 접속 시 , 쿠키를 이용하여 세션 ID 값을 서버에 전달. 

   (ex- 게시판에 글 작성 시 작성 버튼을 누르면 세션ID 를 참조하여 작성자를 지정하게 한다 ) 



##### 세션 사용 사례 

로그인 정보 유지 .



----



## 쿠키와 세션의 차이 



- **저장위치**

  - 쿠키는 클라이언트에 파일로 저장,   세션은 서버에 저장. 

- **보안** 

  - 쿠키는 클라이언트 로컬에 저장되기 때문에 변질되거나 request 에서 스니핑 당할 우려가 있어서 보안에 취약하다. 

    그러나 세션은 쿠키를 이용해서 sessionid만 저장하고 그것으로 구분해서 서버에서 처리하기 때문에 비교적 보안성이 좋다. 

- **라이프 사이클** 

  - 쿠키도 만료시간이 있지만 파일로 저장되기 때문에 브라우저를 종료해도 계속해서 정보가 남아있을 수 있다. 또한 만료기간을 넉넉하게 잡아두면 쿠키삭제를 할 때까지 유지될 수도 있다. 

    그러나 세션은 만료시간을 정할 수 있지만 브라우저가 종료되면 만료시간에 상관없이 삭제된다. 

- **속도** 

  - 쿠키에 정보가 있기 때문에 서버에 요청 시 속도가 빠르고 

    세션은 정보가 서버에 있기 때문에 처리가 요구되어 비교적 느린 속도를 낸다. 



- 세션은 서버의 자원을 사용하기 때문에 무분별하게 만들다보면 서버의 메모리가 감당할 수 없어질 수 있고, 속도가 느려질 수 있다. 



- 쿠키, 세션은 캐시와 엄연히 다르다. 
  - 캐시는 이미지나 css.js 파일 등이 사용자의 브라우저에 저장이 되는 것이다. 













